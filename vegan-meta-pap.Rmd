---
title: "vegan-meta-pap"
author: "Seth Green"
date: "2023-11-15"
output: html_document
editor_options: 
  chunk_output_type: console
---

**libraries, functions, options, and data **
fake dataset for now
```{r setup, message=F}

#' libraries
library(metafor, quietly = T)
library(dplyr, warn.conflicts = F)
library(ggplot2, warn.conflicts = F)
library(lubridate, warn.conflicts = F)
library(purrr)
library(stringr)
library(tidyr, warn.conflicts = F)
library(tibble)
library(knitr)

#' functions
source("https://raw.githubusercontent.com/setgree/sv-meta/main/code/functions/map_robust.R")
source('https://raw.githubusercontent.com/setgree/sv-meta/main/code/functions/sum_lm.R')
options(scipen = 99)

#' data

dat <- data.frame(study_name = c('a study', 'b study', 'c study',
                                 'd study', 'e study', 'f study', 
                                 'g study', 'h study', 'i study', 
                                 'j study', 'k study', 'l study'),
                  d  = rnorm(12, 1, 1),
                  vard_d = rnorm(12, 0.5, 0.5),
                  cluster_var = rbinom(12, 1, 0.3))

```

Average effect?

```{r avg_eff}
dat |> map_robust()

```